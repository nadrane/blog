{"version":3,"sources":["../../../src/internal-plugins/load-babel-config/gatsby-node.js"],"names":["fs","require","apiRunnerNode","withBasePath","exports","onPreBootstrap","store","getState","program","directory","browserslist","directoryPath","stage","babelState","JSON","stringify","babelrc","writeFile"],"mappings":";;;;;;AAEA,MAAMA,EAAE,GAAGC,OAAO,CAAE,UAAF,CAAlB;;AAEA,MAAMC,aAAa,GAAGD,OAAO,CAAE,6BAAF,CAA7B;;iBACyBA,OAAO,CAAE,kBAAF,C;MAAxBE,Y,YAAAA,Y;;AAERC,OAAO,CAACC,cAAR;AAAA;AAAA;AAAA,6CAAyB,WAAO;AAAEC,IAAAA;AAAF,GAAP,EAAqB;AAAA,kCACRA,KAAK,CAACC,QAAN,GAAiBC,OADT;AAAA,UACpCC,SADoC,yBACpCA,SADoC;AAAA,UACzBC,YADyB,yBACzBA,YADyB;AAE5C,UAAMC,aAAa,GAAGR,YAAY,CAACM,SAAD,CAAlC;AAEA,UAAMP,aAAa,CAAE,qBAAF,EAAwB;AACzCU,MAAAA,KAAK,EAAG;AADiC,KAAxB,CAAnB;AAGA,UAAMV,aAAa,CAAE,qBAAF,EAAwB;AACzCU,MAAAA,KAAK,EAAG;AADiC,KAAxB,CAAnB;AAGA,UAAMV,aAAa,CAAE,qBAAF,EAAwB;AACzCU,MAAAA,KAAK,EAAG;AADiC,KAAxB,CAAnB;AAGA,UAAMV,aAAa,CAAE,qBAAF,EAAwB;AACzCU,MAAAA,KAAK,EAAG;AADiC,KAAxB,CAAnB;AAIA,UAAMC,UAAU,GAAGC,IAAI,CAACC,SAAL,mBAEZT,KAAK,CAACC,QAAN,GAAiBS,OAFL;AAGfN,MAAAA;AAHe,QAKjB,IALiB,EAMjB,CANiB,CAAnB;AASA,UAAMV,EAAE,CAACiB,SAAH,CAAaN,aAAa,CAAE,wBAAF,CAA1B,EAAsDE,UAAtD,CAAN;AACD,GA3BD;;AAAA;AAAA;AAAA;AAAA","sourcesContent":["/* @flow */\n\nconst fs = require(`fs-extra`)\n\nconst apiRunnerNode = require(`../../utils/api-runner-node`)\nconst { withBasePath } = require(`../../utils/path`)\n\nexports.onPreBootstrap = async ({ store }) => {\n  const { directory, browserslist } = store.getState().program\n  const directoryPath = withBasePath(directory)\n\n  await apiRunnerNode(`onCreateBabelConfig`, {\n    stage: `develop`,\n  })\n  await apiRunnerNode(`onCreateBabelConfig`, {\n    stage: `develop-html`,\n  })\n  await apiRunnerNode(`onCreateBabelConfig`, {\n    stage: `build-javascript`,\n  })\n  await apiRunnerNode(`onCreateBabelConfig`, {\n    stage: `build-html`,\n  })\n\n  const babelState = JSON.stringify(\n    {\n      ...store.getState().babelrc,\n      browserslist,\n    },\n    null,\n    2\n  )\n\n  await fs.writeFile(directoryPath(`.cache/babelState.json`), babelState)\n}\n"],"file":"gatsby-node.js"}