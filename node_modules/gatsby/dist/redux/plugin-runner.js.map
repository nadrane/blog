{"version":3,"sources":["../../src/redux/plugin-runner.js"],"names":["require","store","emitter","apiRunnerNode","on","action","node","getState","nodes","get","payload","id","traceTags","nodeId","nodeType","internal","type","traceId","parentSpan","page","plugin","name"],"mappings":";;AAAA;iBAE2BA,OAAO,CAAE,SAAF,C;MAA1BC,K,YAAAA,K;MAAOC,O,YAAAA,O;;AACf,MAAMC,aAAa,GAAGH,OAAO,CAAE,0BAAF,CAA7B;;AAEAE,OAAO,CAACE,EAAR,CAAY,aAAZ,EAA0BC,MAAM,IAAI;AAClC,QAAMC,IAAI,GAAGL,KAAK,CAACM,QAAN,GAAiBC,KAAjB,CAAuBC,GAAvB,CAA2BJ,MAAM,CAACK,OAAP,CAAeC,EAA1C,CAAb;AACA,QAAMC,SAAS,GAAG;AAAEC,IAAAA,MAAM,EAAEP,IAAI,CAACK,EAAf;AAAmBG,IAAAA,QAAQ,EAAER,IAAI,CAACS,QAAL,CAAcC;AAA3C,GAAlB;AACAb,EAAAA,aAAa,CAAE,cAAF,EAAiB;AAC5BG,IAAAA,IAD4B;AAE5BW,IAAAA,OAAO,EAAEZ,MAAM,CAACY,OAFY;AAG5BC,IAAAA,UAAU,EAAEb,MAAM,CAACa,UAHS;AAI5BN,IAAAA;AAJ4B,GAAjB,CAAb;AAMD,CATD;AAWAV,OAAO,CAACE,EAAR,CAAY,aAAZ,EAA0BC,MAAM,IAAI;AAClC,QAAMc,IAAI,GAAGd,MAAM,CAACK,OAApB;AACAP,EAAAA,aAAa,CACV,cADU,EAEX;AAAEgB,IAAAA,IAAF;AAAQF,IAAAA,OAAO,EAAEZ,MAAM,CAACY,OAAxB;AAAiCC,IAAAA,UAAU,EAAEb,MAAM,CAACa;AAApD,GAFW,EAGXb,MAAM,CAACe,MAAP,CAAcC,IAHH,CAAb;AAKD,CAPD","sourcesContent":["// Invoke plugins for certain actions.\n\nconst { store, emitter } = require(`./index`)\nconst apiRunnerNode = require(`../utils/api-runner-node`)\n\nemitter.on(`CREATE_NODE`, action => {\n  const node = store.getState().nodes.get(action.payload.id)\n  const traceTags = { nodeId: node.id, nodeType: node.internal.type }\n  apiRunnerNode(`onCreateNode`, {\n    node,\n    traceId: action.traceId,\n    parentSpan: action.parentSpan,\n    traceTags,\n  })\n})\n\nemitter.on(`CREATE_PAGE`, action => {\n  const page = action.payload\n  apiRunnerNode(\n    `onCreatePage`,\n    { page, traceId: action.traceId, parentSpan: action.parentSpan },\n    action.plugin.name\n  )\n})\n"],"file":"plugin-runner.js"}