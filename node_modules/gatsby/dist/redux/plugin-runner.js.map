{"version":3,"sources":["../../src/redux/plugin-runner.js"],"names":["require","emitter","getNode","apiRunnerNode","on","action","node","payload","id","traceTags","nodeId","nodeType","internal","type","traceId","parentSpan","page","plugin","name"],"mappings":";;AAAA;iBAEoBA,OAAO,CAAE,SAAF,C;MAAnBC,O,YAAAA,O;;kBACYD,OAAO,CAAE,aAAF,C;MAAnBE,O,aAAAA,O;;AACR,MAAMC,aAAa,GAAGH,OAAO,CAAE,0BAAF,CAA7B;;AAEAC,OAAO,CAACG,EAAR,CAAY,aAAZ,EAA0BC,MAAM,IAAI;AAClC,QAAMC,IAAI,GAAGJ,OAAO,CAACG,MAAM,CAACE,OAAP,CAAeC,EAAhB,CAApB;AACA,QAAMC,SAAS,GAAG;AAAEC,IAAAA,MAAM,EAAEJ,IAAI,CAACE,EAAf;AAAmBG,IAAAA,QAAQ,EAAEL,IAAI,CAACM,QAAL,CAAcC;AAA3C,GAAlB;AACAV,EAAAA,aAAa,CAAE,cAAF,EAAiB;AAC5BG,IAAAA,IAD4B;AAE5BQ,IAAAA,OAAO,EAAET,MAAM,CAACS,OAFY;AAG5BC,IAAAA,UAAU,EAAEV,MAAM,CAACU,UAHS;AAI5BN,IAAAA;AAJ4B,GAAjB,CAAb;AAMD,CATD;AAWAR,OAAO,CAACG,EAAR,CAAY,aAAZ,EAA0BC,MAAM,IAAI;AAClC,QAAMW,IAAI,GAAGX,MAAM,CAACE,OAApB;AACAJ,EAAAA,aAAa,CACV,cADU,EAEX;AAAEa,IAAAA,IAAF;AAAQF,IAAAA,OAAO,EAAET,MAAM,CAACS,OAAxB;AAAiCC,IAAAA,UAAU,EAAEV,MAAM,CAACU;AAApD,GAFW,EAGXV,MAAM,CAACY,MAAP,CAAcC,IAHH,CAAb;AAKD,CAPD","sourcesContent":["// Invoke plugins for certain actions.\n\nconst { emitter } = require(`./index`)\nconst { getNode } = require(`../db/nodes`)\nconst apiRunnerNode = require(`../utils/api-runner-node`)\n\nemitter.on(`CREATE_NODE`, action => {\n  const node = getNode(action.payload.id)\n  const traceTags = { nodeId: node.id, nodeType: node.internal.type }\n  apiRunnerNode(`onCreateNode`, {\n    node,\n    traceId: action.traceId,\n    parentSpan: action.parentSpan,\n    traceTags,\n  })\n})\n\nemitter.on(`CREATE_PAGE`, action => {\n  const page = action.payload\n  apiRunnerNode(\n    `onCreatePage`,\n    { page, traceId: action.traceId, parentSpan: action.parentSpan },\n    action.plugin.name\n  )\n})\n"],"file":"plugin-runner.js"}