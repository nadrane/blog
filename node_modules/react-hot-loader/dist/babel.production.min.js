"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var RHLPackage="react-hot-loader";function isImportedFromRHL(e,t){var r=e.scope.getBinding(t),a=r&&r.path.node.type;return("ImportSpecifier"===a||"ImportDefaultSpecifier"===a||"ImportNamespaceSpecifier"===a)&&r.path.parent.source.value===RHLPackage}function getRHLContext(e){var t=e.metadata.modules,r=[];if(t&&Array.isArray(t.imports))for(var a=t.imports,n=0;n<a.length;n++){var l=a[n],o=l.source,i=l.specifiers;if(o===RHLPackage)for(var p=0;p<i.length;p++){var c=i[p];("named"===c.kind&&"hot"===c.imported||"namespace"===c.kind)&&r.push(c)}}return r.length?r:null}function plugin(){return{pre:function(){this.rhlContext=getRHLContext(this.file),this.rhlContext||(this.cancel=!0)},visitor:{CallExpression:function(e){if(!this.cancel)for(var t=0;t<this.rhlContext.length;t++){var r=this.rhlContext[t];if("named"===r.kind){if(e.node.callee.name===r.local&&isImportedFromRHL(e,r.local)&&"CallExpression"===e.parent.type&&e.parent.arguments[0]&&"Identifier"===e.parent.arguments[0].type){e.parentPath.replaceWith(e.parent.arguments[0]);break}}else if("namespace"===r.kind&&e.node.callee.callee&&"MemberExpression"===e.node.callee.callee.type&&"Identifier"===e.node.callee.callee.object.type&&e.node.callee.callee.object.name===r.local&&isImportedFromRHL(e,r.local)&&"Identifier"===e.node.callee.callee.property.type&&"hot"===e.node.callee.callee.property.name&&e.node.arguments[0]&&"Identifier"===e.node.arguments[0].type){e.replaceWith(e.node.arguments[0]);break}}}}}}exports.default=plugin;
