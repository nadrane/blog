<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.625 -apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:normal;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}h1{margin-left:0;margin-right:0;margin-top:2.4375rem;padding-bottom:calc(0.40625rem - 1px);padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.21875rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:2rem;line-height:1.1;border-bottom:1px solid hsla(0,0%,0%,0.07);}h2{margin-left:0;margin-right:0;margin-top:1.625rem;padding-bottom:calc(0.40625rem - 1px);padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.40625rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:1.1;border-bottom:1px solid hsla(0,0%,0%,0.07);}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:0.87055rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:hsla(0,0%,0%,0.53);font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:0.81225rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}ul{margin-left:1.625rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.625rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;font-size:0.85rem;line-height:1.625rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;font-size:1rem;line-height:1.625rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}blockquote{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:calc(0.8125rem - 1px);padding-right:0;padding-top:0;margin-bottom:0.8125rem;border-left:4px solid hsla(0,0%,0%,0.13);color:hsla(0,0%,0%,0.53);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(0.8125rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}b{font-weight:600;}strong{font-weight:600;}dt{font-weight:600;}th{font-weight:600;}li{margin-bottom:calc(0.8125rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.625rem;margin-bottom:calc(0.8125rem / 2);margin-top:calc(0.8125rem / 2);}li > ul{margin-left:1.625rem;margin-bottom:calc(0.8125rem / 2);margin-top:calc(0.8125rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(0.8125rem / 2);}code{font-size:0.85rem;line-height:1.625rem;}kbd{font-size:0.85rem;line-height:1.625rem;}samp{font-size:0.85rem;line-height:1.625rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.08333rem;padding-right:1.08333rem;padding-top:0.8125rem;padding-bottom:calc(0.8125rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}h3,h4,h5,h6{margin-bottom:0.8125rem;margin-top:1.625rem;}ol,ul{margin-left:2.03125rem;}li>ol,li>ul{margin-left:2.03125rem;}a{color:#4078c0;text-decoration:none;}a:hover,a:active{text-decoration:underline;}</style><style data-href="/styles.38a56f3a7a16cf7f0fd0.css">code[class*=language-],pre[class*=language-]{color:#000;background:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{position:relative;margin:.5em 0;overflow:visible;padding:0}pre[class*=language-]>code{position:relative;border-left:10px solid #358ccb;box-shadow:-1px 0 0 0 #358ccb,0 0 0 1px #dfdfdf;background-color:#fdfdfd;background-image:-webkit-gradient(linear,left top,left bottom,color-stop(50%,transparent),color-stop(50%,rgba(69,142,209,.04)));background-image:linear-gradient(transparent 50%,rgba(69,142,209,.04) 0);background-size:3em 3em;background-origin:content-box;background-attachment:local}code[class*=language]{max-height:inherit;height:inherit;padding:0 1em;display:block;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#fdfdfd;box-sizing:border-box;margin-bottom:1em}:not(pre)>code[class*=language-]{position:relative;padding:.2em;border-radius:.3em;color:#c92c2c;border:1px solid rgba(0,0,0,.1);display:inline;white-space:normal}pre[class*=language-]:after,pre[class*=language-]:before{content:"";z-index:-2;display:block;position:absolute;bottom:.75em;left:.18em;width:40%;height:20%;max-height:13em;box-shadow:0 13px 8px #979797;-webkit-transform:rotate(-2deg);transform:rotate(-2deg)}:not(pre)>code[class*=language-]:after,pre[class*=language-]:after{right:.75em;left:auto;-webkit-transform:rotate(2deg);transform:rotate(2deg)}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#7d8b99}.token.punctuation{color:#5f6364}.token.boolean,.token.constant,.token.deleted,.token.function-name,.token.number,.token.property,.token.symbol,.token.tag{color:#c92c2c}.token.attr-name,.token.builtin,.token.char,.token.function,.token.inserted,.token.selector,.token.string{color:#2f9c0a}.token.entity,.token.operator,.token.url,.token.variable{color:#a67f59;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.class-name,.token.keyword{color:#1990b8}.token.important,.token.regex{color:#e90}.language-css .token.string,.style .token.string{color:#a67f59;background:hsla(0,0%,100%,.5)}.token.important{font-weight:400}.token.bold{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.namespace{opacity:.7}@media screen and (max-width:767px){pre[class*=language-]:after,pre[class*=language-]:before{bottom:14px;box-shadow:none}}.token.cr:before,.token.lf:before,.token.tab:not(:empty):before{color:#e0d7d1}pre[class*=language-].line-numbers.line-numbers{padding-left:0}pre[class*=language-].line-numbers.line-numbers code{padding-left:3.8em}pre[class*=language-].line-numbers.line-numbers .line-numbers-rows{left:0}pre[class*=language-][data-line]{padding-top:0;padding-bottom:0;padding-left:0}pre[data-line] code{position:relative;padding-left:4em}pre .line-highlight{margin-top:0}.styles-module--headerWrapper--2tn7j{background-color:#fafafa;height:100px;display:flex;justify-content:center;align-items:center;white-space:nowrap}.styles-module--header--3Gxg8{display:flex;justify-content:start;align-items:flex-end;width:100%;max-width:960px;margin:0 0 0 10px}.styles-module--header--3Gxg8 h1{padding-bottom:0}.styles-module--header--3Gxg8 h1:hover{opacity:.7}.styles-module--headerLinks--2TTvw{border-bottom:none;list-style-type:none;display:flex}.styles-module--headerLinks--2TTvw li a{color:rgba(0,0,0,.8);font-size:18px;font-weight:300;padding:0 10px;margin-bottom:0}@media only screen and (max-width:992px){.styles-module--headerLinks--2TTvw li a{font-size:16px;padding:0 8px}.styles-module--header--3Gxg8{max-width:680px;margin:0 10px}}@media only screen and (max-width:768px){.styles-module--headerLinks--2TTvw{margin-left:0;line-height:1.3rem}.styles-module--headerLinks--2TTvw li a{font-size:14px;padding:0 6px}.styles-module--headerWrapper--2tn7j{height:75px}.styles-module--header--3Gxg8 h1{font-size:20px}}.styles-module--sideBarSection--kbYhv{display:flex;flex-direction:column}.styles-module--sideBarLabel--1Yp9y{padding-top:0;font-weight:600;font-size:14px;text-transform:uppercase;white-space:nowrap}.styles-module--sideBarEntry--yZZc9{padding-top:0;box-sizing:border-box;color:#333;font-size:14px;font-weight:400;line-height:22.4px;list-style-type:none}pre[class^=language-]:before{box-shadow:none}pre[class^=language-]>code{box-shadow:none;border-left:none;background-color:#efefef;background-image:none;padding:10px}pre[class^=language-]:after{box-shadow:none}.styles-module--main--1m7Ru{display:flex;justify-content:center;min-width:0}.styles-module--contentWrapper--iDaC7{display:flex;max-width:960px;min-width:0}.styles-module--content--3pIkX{max-width:680px;padding-top:0;margin:26px 50px 15px 10px;min-width:300px}@media only screen and (max-width:992px){.styles-module--content--3pIkX{margin:26px 10px}}.styles-module--sidebar--WpqGz{margin-top:5px;max-width:220px}@media only screen and (max-width:992px){.styles-module--sidebar--WpqGz{display:none}}sup a{color:#000}h2{clear:both;font-size:22px;margin-bottom:16.5px;overflow-wrap:break-word;padding-right:0;padding-top:24px;font-weight:400;line-height:30.8px}@media only screen and (max-width:992px){h2{font-size:20px;margin-bottom:14.5px;padding-top:6px}}h3{font-size:18px;overflow-wrap:break-word;font-weight:300;line-height:30.8px;color:#767676}@media only screen and (max-width:992px){h3{font-size:18px;margin-bottom:14.5px;padding-top:6px;margin-top:14px}}.styles-module--pb2--AfFCT{margin-bottom:50px}.styles-module--publishDate--ykcEK{color:#767676;font-size:11px;font-size:.6875rem;font-weight:800;letter-spacing:.1818em;text-transform:uppercase}.styles-module--articleTitle--PGngd{color:#333;font-size:26px;font-weight:300;line-height:36.4px;margin-top:0;margin-bottom:14px;overflow-wrap:break-word}@media only screen and (max-width:992px){.styles-module--articleTitle--PGngd{font-size:22px}}.styles-module--socialButtons--1R7Rx{display:flex;justify-content:space-between;list-style-type:none;margin:0;width:150px}.styles-module--socialButtons--1R7Rx a{cursor:pointer}.styles-module--border--O42kg{margin-top:25px;border-top:1px solid rgba(0,0,0,.25);margin-bottom:25px}.styles-module--mcHeader--OsuQO{display:block;margin-bottom:10px}.styles-module--emailLabel--xb2_N{display:none}.styles-module--flexForm--4P7yQ{display:flex;width:100%;box-shadow:1px 2px 4px rgba(0,0,0,.3)}.styles-module--flexForm--4P7yQ *{border:0;padding:0 0 0 10px;background:#fff;line-height:45px;font-size:1rem;border-radius:0;outline:0}.styles-module--flexForm--4P7yQ input[type=email]{width:75%}.styles-module--flexForm--4P7yQ button[type=submit]{background:#ef3f5a;border:1px solid #ef3f5a;color:#fff;padding:0 30px;cursor:pointer;white-space:nowrap;width:25%;min-width:150px}.styles-module--flexForm--4P7yQ button[type=submit]:hover{background:#d73851;border:1px solid #d73851}@media only screen and (max-width:768px){.styles-module--flexForm--4P7yQ *{line-height:35px;font-size:.75rem}.styles-module--flexForm--4P7yQ button[type=submit]{padding:0 10px;width:25%;min-width:0}}</style><meta name="generator" content="Gatsby 2.13.82"/><title data-react-helmet="true">Nick Drane</title><meta data-react-helmet="true" name="description" content="A blog about programming and modern web development, particularly Node.js and React"/><meta data-react-helmet="true" name="keywords" content="react, javascript, nodejs"/><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/><link rel="canonical" href="https://nickdrane.com/using-jq-to-effortlessly-ingest-newline-delimited-JSON-into-postgres/" data-baseprotocol="https:" data-basehost="nickdrane.com"/><link rel="shortcut icon" href="/icons/icon-48x48.png?v=008654519ce705ac7bc44303a9014606"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=008654519ce705ac7bc44303a9014606"/><style type="text/css">.gatsby-resp-image-image{width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;color:transparent;}</style><link rel="preconnect dns-prefetch" href="https://www.google-analytics.com"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link as="script" rel="preload" href="/webpack-runtime-be38c574d6de23c49d2b.js"/><link as="script" rel="preload" href="/app-d60063a2e95edf8a1525.js"/><link as="script" rel="preload" href="/styles-931eac28e1f8d6822264.js"/><link as="script" rel="preload" href="/1-5cd4bced7d1a4315449b.js"/><link as="script" rel="preload" href="/2-ee0ba89776f770af5f0b.js"/><link as="script" rel="preload" href="/component---src-templates-article-js-84b66870c9c53dcf996b.js"/><link as="fetch" rel="preload" href="/page-data/using-jq-to-effortlessly-ingest-newline-delimited-JSON-into-postgres/page-data.json" crossorigin="anonymous"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div><div class="styles-module--headerWrapper--2tn7j"><div class="styles-module--header--3Gxg8"><h1 style="border-bottom:none"><a style="color:black;text-decoration:none" href="/">Nick Drane</a></h1><div style="flex-grow:1"></div><ul class="styles-module--headerLinks--2TTvw"><li><a href="/hire-me">Hire Me</a></li><li><a href="/about-me">About Me</a></li></ul></div></div><div class="styles-module--main--1m7Ru"><div class="styles-module--contentWrapper--iDaC7"><section class="styles-module--content--3pIkX"><article class="styles-module--pb2--AfFCT"><ul class="styles-module--socialButtons--1R7Rx"><li><a style="display:block;width:39px" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fnickdrane.com%2Fusing-jq-to-effortlessly-ingest-newline-delimited-JSON-into-postgres&amp;quote=Using%20Shell%20Commands%20to%20Effortlessly%20Ingest%20Line-Delimited%20JSON%20into%20PostgreSQL" title="Share on Facebook" target="_blank" rel="noopener noreferrer"><img style="max-width:100%" alt="Share on Facebook" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGhlaWdodD0iNjdweCIgaWQ9IkxheWVyXzEiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDY3IDY3OyIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIwIDAgNjcgNjciIHdpZHRoPSI2N3B4IiB4bWw6c3BhY2U9InByZXNlcnZlIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48cGF0aCBkPSJNMjkuNzY1LDUwLjMyaDYuNzQ0VjMzLjk5OGg0LjQ5OWwwLjU5Ni01LjYyNGgtNS4wOTUgIGwwLjAwNy0yLjgxNmMwLTEuNDY2LDAuMTQtMi4yNTMsMi4yNDQtMi4yNTNoMi44MTJWMTcuNjhoLTQuNWMtNS40MDUsMC03LjMwNywyLjcyOS03LjMwNyw3LjMxN3YzLjM3N2gtMy4zNjl2NS42MjVoMy4zNjlWNTAuMzJ6ICAgTTM0LDY0QzE3LjQzMiw2NCw0LDUwLjU2OCw0LDM0QzQsMTcuNDMxLDE3LjQzMiw0LDM0LDRzMzAsMTMuNDMxLDMwLDMwQzY0LDUwLjU2OCw1MC41NjgsNjQsMzQsNjR6IiBzdHlsZT0iZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7ZmlsbDojM0E1ODlCOyIvPjwvc3ZnPg=="/></a></li><li><a style="display:block;width:39px" href="https://twitter.com/intent/tweet?url=https%3A%2F%2Fnickdrane.com%2Fusing-jq-to-effortlessly-ingest-newline-delimited-JSON-into-postgres&amp;text=Using%20Shell%20Commands%20to%20Effortlessly%20Ingest%20Line-Delimited%20JSON%20into%20PostgreSQL" target="_blank" title="Tweet" rel="noopener noreferrer"><img style="max-width:100%" alt="Tweet" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGhlaWdodD0iNjdweCIgaWQ9IkxheWVyXzEiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDY3IDY3OyIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIwIDAgNjcgNjciIHdpZHRoPSI2N3B4IiB4bWw6c3BhY2U9InByZXNlcnZlIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48cGF0aCBkPSJNMzguMTY3LDIyLjI4M2MtMi42MTksMC45NTMtNC4yNzQsMy40MTEtNC4wODYsNi4xMDEgIGwwLjA2MywxLjAzOGwtMS4wNDgtMC4xMjdjLTMuODEzLTAuNDg3LTcuMTQ1LTIuMTM5LTkuOTc0LTQuOTE1bC0xLjM4My0xLjM3N2wtMC4zNTYsMS4wMTdjLTAuNzU0LDIuMjY3LTAuMjcyLDQuNjYxLDEuMjk5LDYuMjcxICBjMC44MzgsMC44OSwwLjY0OSwxLjAxNy0wLjc5NiwwLjQ4N2MtMC41MDMtMC4xNjktMC45NDMtMC4yOTYtMC45ODUtMC4yMzNjLTAuMTQ2LDAuMTQ5LDAuMzU2LDIuMDc2LDAuNzU0LDIuODM5ICBjMC41NDUsMS4wNiwxLjY1NSwyLjA5NywyLjg3MSwyLjcxMmwxLjAyNywwLjQ4N2wtMS4yMTUsMC4wMjFjLTEuMTczLDAtMS4yMTUsMC4wMjEtMS4wODksMC40NjcgIGMwLjQxOSwxLjM3NywyLjA3NCwyLjgzOSwzLjkxOCwzLjQ3NWwxLjI5OSwwLjQ0NGwtMS4xMzEsMC42NzhjLTEuNjc2LDAuOTc2LTMuNjQ2LDEuNTI2LTUuNjE2LDEuNTY3ICBDMjAuNzc1LDQzLjI1NiwyMCw0My4zNDEsMjAsNDMuNDA1YzAsMC4yMTEsMi41NTcsMS4zOTcsNC4wNDQsMS44NjRjNC40NjMsMS4zNzcsOS43NjUsMC43ODMsMTMuNzQ2LTEuNTY4ICBjMi44MjktMS42NzQsNS42NTctNSw2Ljk3OC04LjIyMWMwLjcxMy0xLjcxNSwxLjQyNS00Ljg1MSwxLjQyNS02LjM1NGMwLTAuOTc1LDAuMDYzLTEuMTAyLDEuMjM2LTIuMjY3ICBjMC42OTItMC42NzgsMS4zNDEtMS40MTksMS40NjctMS42MzFjMC4yMS0wLjQwMywwLjE4OC0wLjQwMy0wLjg4LTAuMDQzYy0xLjc4MSwwLjYzNi0yLjAzMywwLjU1MS0xLjE1Mi0wLjQwMiAgYzAuNjQ5LTAuNjc4LDEuNDI1LTEuOTA3LDEuNDI1LTIuMjY3YzAtMC4wNjMtMC4zMTQsMC4wNDItMC42NzEsMC4yMzNjLTAuMzc3LDAuMjEyLTEuMjE1LDAuNTMtMS44NDQsMC43MmwtMS4xMzEsMC4zNjFsLTEuMDI3LTAuNyAgYy0wLjU2Ni0wLjM4MS0xLjM2MS0wLjgwNS0xLjc4MS0wLjkzMkM0MC43NjYsMjEuOTAyLDM5LjEzMSwyMS45NDQsMzguMTY3LDIyLjI4M3ogTTM0LDY0QzE3LjQzMiw2NCw0LDUwLjU2OCw0LDM0ICBDNCwxNy40MzEsMTcuNDMyLDQsMzQsNHMzMCwxMy40MzEsMzAsMzBDNjQsNTAuNTY4LDUwLjU2OCw2NCwzNCw2NHoiIHN0eWxlPSJmaWxsLXJ1bGU6ZXZlbm9kZDtjbGlwLXJ1bGU6ZXZlbm9kZDtmaWxsOiM1OThEQ0E7Ii8+PC9zdmc+"/></a></li><li><a style="display:block;width:39px" href="http://www.linkedin.com/shareArticle?mini=true&amp;url=mini=true&amp;url=https%3A%2F%2Fnickdrane.com%2Fusing-jq-to-effortlessly-ingest-newline-delimited-JSON-into-postgres&amp;title=Using%20Shell%20Commands%20to%20Effortlessly%20Ingest%20Line-Delimited%20JSON%20into%20PostgreSQL" target="_blank" title="Share on LinkedIn" rel="noopener noreferrer"><img style="max-width:100%" alt="Share on LinkedIn" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGhlaWdodD0iNjdweCIgaWQ9IkxheWVyXzEiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDY3IDY3OyIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIwIDAgNjcgNjciIHdpZHRoPSI2N3B4IiB4bWw6c3BhY2U9InByZXNlcnZlIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48cGF0aCBkPSJNNTAuODM3LDQ4LjEzN1YzNi40MjVjMC02LjI3NS0zLjM1LTkuMTk1LTcuODE2LTkuMTk1ICBjLTMuNjA0LDAtNS4yMTksMS45ODMtNi4xMTksMy4zNzRWMjcuNzFoLTYuNzljMC4wOSwxLjkxNywwLDIwLjQyNywwLDIwLjQyN2g2Ljc5VjM2LjcyOWMwLTAuNjA5LDAuMDQ0LTEuMjE5LDAuMjI0LTEuNjU1ICBjMC40OS0xLjIyLDEuNjA3LTIuNDgzLDMuNDgyLTIuNDgzYzIuNDU4LDAsMy40NCwxLjg3MywzLjQ0LDQuNjE4djEwLjkyOUg1MC44Mzd6IE0yMi45NTksMjQuOTIyYzIuMzY3LDAsMy44NDItMS41NywzLjg0Mi0zLjUzMSAgYy0wLjA0NC0yLjAwMy0xLjQ3NS0zLjUyOC0zLjc5Ny0zLjUyOHMtMy44NDEsMS41MjQtMy44NDEsMy41MjhjMCwxLjk2MSwxLjQ3NCwzLjUzMSwzLjc1MywzLjUzMUgyMi45NTl6IE0zNCw2NCAgQzE3LjQzMiw2NCw0LDUwLjU2OCw0LDM0QzQsMTcuNDMxLDE3LjQzMiw0LDM0LDRzMzAsMTMuNDMxLDMwLDMwQzY0LDUwLjU2OCw1MC41NjgsNjQsMzQsNjR6IE0yNi4zNTQsNDguMTM3VjI3LjcxaC02Ljc4OXYyMC40MjcgIEgyNi4zNTR6IiBzdHlsZT0iZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7ZmlsbDojMDA3QUI5OyIvPjwvc3ZnPg=="/></a></li><li><a style="display:flex;align-items:center;justify-content:center;width:37px;height:39px;margin-left:2px" href="mailto:?subject=Using Shell Commands to Effortlessly Ingest Line-Delimited JSON into PostgreSQL&amp;body=Check this out: https://nickdrane.com/using-jq-to-effortlessly-ingest-newline-delimited-JSON-into-postgres" target="_blank" title="Send email" rel="noopener noreferrer"><img style="max-width:36px" alt="Share via Email" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjxzdmcgaGVpZ2h0PSI2MHB4IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCA2MCA2MCIgd2lkdGg9IjYwcHgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6c2tldGNoPSJodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2gvbnMiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48dGl0bGUvPjxkZWZzLz48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGlkPSJmbGF0IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSI+PGcgaWQ9Im1haWwiPjxwYXRoIGQ9Ik0zMCw2MCBDNDYuNTY4NTQzMyw2MCA2MCw0Ni41Njg1NDMzIDYwLDMwIEM2MCwxMy40MzE0NTY3IDQ2LjU2ODU0MzMsMCAzMCwwIEMxMy40MzE0NTY3LDAgMCwxMy40MzE0NTY3IDAsMzAgQzAsNDYuNTY4NTQzMyAxMy40MzE0NTY3LDYwIDMwLDYwIFoiIGZpbGw9IiMzNDk4REIiLz48cGF0aCBkPSJNMzAsMzMuNDYxNTM4NSBMNDcuMzA3NjkyMywxOC40NjE1Mzg1IEwxMi42OTIzMDc3LDE4LjQ2MTUzODUgTDMwLDMzLjQ2MTUzODUgWiBNMjUuMzI1MTc2NSwzMS44MDEwNTM2IEwzMCwzNS42MzgyMzk5IEwzNC42MDE1ODEzLDMxLjgwMTA1MzYgTDQ3LjMwNzY5MjMsNDIuNjkyMzA3NyBMMTIuNjkyMzA3Nyw0Mi42OTIzMDc3IEwyNS4zMjUxNzY1LDMxLjgwMTA1MzYgWiBNMTEuNTM4NDYxNSw0MS41Mzg0NjE1IEwxMS41Mzg0NjE1LDE5LjYxNTM4NDYgTDI0LjIzMDc2OTIsMzAuNTc2OTIzMSBMMTEuNTM4NDYxNSw0MS41Mzg0NjE1IFogTTQ4LjQ2MTUzODUsNDEuNTM4NDYxNSBMNDguNDYxNTM4NSwxOS42MTUzODQ2IEwzNS43NjkyMzA4LDMwLjU3NjkyMzEgTDQ4LjQ2MTUzODUsNDEuNTM4NDYxNSBaIiBmaWxsPSIjRkZGRkZGIi8+PC9nPjwvZz48L3N2Zz4="/></a></li></ul><time class="styles-module--publishDate--ykcEK">Thu Oct 18 2018</time><h1 class="styles-module--articleTitle--PGngd">Using Shell Commands to Effortlessly Ingest Line-Delimited JSON into PostgreSQL</h1><div><p>I recently wanted to ingest a <a href="https://en.wikipedia.org/wiki/JSON_streaming#Line-delimited_JSON">line-delimited</a> JSON file into <a href="https://www.postgresql.org/">Postgres</a> for some quick data exploration. I was surprised when I couldn't find a simple CLI solution that parsed the JSON and loaded each field into its own column. Every approach I found instead inserted the entire JSON object in a JSONB field. Here is my solution.</p>
<!-- more -->
<h2>Downloading 250000 Hacker News Comments</h2>
<p>Let's say we want to download all of the <a href="https://news.ycombinator.com/">Hacker News</a> comments from the month of May. A line-delimited JSON file is available from <a href="https://files.pushshift.io/hackernews/HNI_2018-05.bz2">pushshift</a>. Fetching and decompressing the file is simple:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">curl</span> https://files.pushshift.io/hackernews/HNI_2018-05.bz2 <span class="token operator">|</span> <span class="token function">bzip2</span> -d</code></pre></div>
<p>Here is what the dataset looks like:</p>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"by"</span><span class="token operator">:</span> <span class="token string">"criddell"</span><span class="token punctuation">,</span>
  <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">16966059</span><span class="token punctuation">,</span>
  <span class="token property">"kids"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">16966312</span><span class="token punctuation">,</span> <span class="token number">16966776</span><span class="token punctuation">,</span> <span class="token number">16969455</span><span class="token punctuation">,</span> <span class="token number">16966323</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"parent"</span><span class="token operator">:</span> <span class="token number">16965363</span><span class="token punctuation">,</span>
  <span class="token property">"retrieved_on"</span><span class="token operator">:</span> <span class="token number">1528401399</span><span class="token punctuation">,</span>
  <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"Yeah - there's always a HATEOAS comment somewhere and..."</span><span class="token punctuation">,</span>
  <span class="token property">"time"</span><span class="token operator">:</span> <span class="token number">1525173078</span><span class="token punctuation">,</span>
  <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"comment"</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>Formatting the Data</h2>
<p>You might think that Postgres has a simple utility for loading line-delimited JSON. Like me, you'd be wrong. It's all the more surprising given that it has a <a href="https://www.postgresql.org/docs/current/static/sql-copy.html">COPY</a> utility that's designed to load data from files. Unfortunately, that utility only supports <code class="language-markup">text</code>, <code class="language-markup">csv</code>, and <code class="language-markup">binary</code> formats.</p>
<p>Transforming our data into a CSV is a breeze with <a href="https://stedolan.github.io/jq/">jq</a>. We can pipe the JSON stream into the following command to extract the <code class="language-text">id</code>, <code class="language-text">by</code>, <code class="language-text">parent</code>, and <code class="language-text">text</code> fields. You can customize the command to extract whatever fields you like.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">jq -r <span class="token string">'[.id, .by, .parent, .text] | @csv'</span></code></pre></div>
<p>The <code class="language-text">-r</code> option indicates that we would like a raw string output, as opposed to JSON formatted with quotes. The <code class="language-js"><span class="token punctuation">[</span><span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token punctuation">.</span>by<span class="token punctuation">,</span> <span class="token punctuation">.</span>parent<span class="token punctuation">,</span> <span class="token punctuation">.</span>text<span class="token punctuation">]</span></code> part produces an array containing the desired fields and the pipe into <code class="language-text">bash&gt;@csv</code> specifies the format. All that's left is to load the data into Postgres.</p>
<h2>Ingesting the Data</h2>
<p>After creating the database</p>
<p><code class="language-text">createdb comment_db</code></p>
<p>and applying the schema</p>
<div class="gatsby-highlight" data-language="sql"><pre class="language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">comment</span> <span class="token punctuation">(</span>
    id <span class="token keyword">INTEGER</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
    <span class="token keyword">by</span> <span class="token keyword">VARCHAR</span><span class="token punctuation">,</span>
    parent <span class="token keyword">INTEGER</span><span class="token punctuation">,</span>
    <span class="token keyword">text</span> <span class="token keyword">TEXT</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>we can hydrate our comments into <code class="language-text">comment_db</code> using <a href="https://www.postgresql.org/docs/current/static/app-psql.html">psql</a></p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">psql comment_db -c <span class="token string">"COPY comment (id, by, parent, text) FROM STDIN WITH (FORMAT CSV)"</span></code></pre></div>
<p>Note that the fields specified above need to be in the same order as the fields in the CSV stream generated by <code class="language-text">jq</code>.</p>
<p>Here is the final command</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">curl</span> https://files.pushshift.io/hackernews/HNI_2018-05.bz2 <span class="token punctuation">\</span>
  <span class="token operator">|</span> <span class="token function">bzip2</span> -d <span class="token punctuation">\</span>
  <span class="token operator">|</span> jq -r <span class="token string">'[.id, .by, .parent, .text] | @csv'</span> <span class="token punctuation">\</span>
  <span class="token operator">|</span> psql comment_db -c <span class="token string">"COPY comment (id, by, parent, text) FROM STDIN WITH (FORMAT CSV)"</span></code></pre></div>
<h2>Supporting Referential Integrity</h2>
<p>You will notice that despite the fact that the <code class="language-text">comment.parent</code> refers to a comment id, we have omitted a foreign key constraint from our schema. This omission is because our command does not control for the order in which comments are loaded. We would have received constraint errors if we specified the foreign key relationship.</p>
<p>We can overcome this obstacle by sorting our incoming comments by id.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token function">curl</span> https://files.pushshift.io/hackernews/HNI_2018-05.bz2 <span class="token punctuation">\</span>
  <span class="token operator">|</span> <span class="token function">bzip2</span> -d <span class="token punctuation">\</span>
  <span class="token operator">|</span> jq -s -r <span class="token string">'sort_by(.id) | .[] | [.id, .by, .parent, .text] | @csv'</span> <span class="token punctuation">\</span>
  <span class="token operator">|</span> psql comment_db -c <span class="token string">"COPY comment (id, by, parent, text) FROM STDIN WITH (FORMAT CSV)"</span></code></pre></div>
<p>If you have a primary key that doesn't serially increase - perhaps you're using a <a href="https://en.wikipedia.org/wiki/Natural_key">natural key</a> or a UUID as your primary key - then you could also sort on a <code class="language-text">created_at</code> timestamp</p>
<h2>Tradeoffs</h2>
<p>Everything in software engineering has a tradeoff, and I would be remiss to to not mention them here. That <code class="language-text">-s</code> option we specified above instructs <code class="language-text">jq</code> to download the entire dataset into memory, a requirement for sorting. If you dataset is too large, then the command will fail (<code class="language-text">jq</code> failed for me at 769MB).</p>
<p>The first option does not suffer this limitation and will work for arbitrarily large datasets. This is because it leverages <a href="https://en.wikipedia.org/wiki/Stream_(computing)">streams</a> to only work on small chunks of data at once. If your dataset is large and you want foreign key constraints, you could use this streaming approach and then apply the constraints after data ingestion completes.</p>
<p><em>If you have a data engineering or PostgreSQL related problem, I do <a href="/hire-me">consulting</a> work and am currently looking for new clients. Please <a href="mailto:nick@nickdrane.com">contact me</a> for more details</em></p></div><ul class="styles-module--socialButtons--1R7Rx"><li><a style="display:block;width:39px" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fnickdrane.com%2Fusing-jq-to-effortlessly-ingest-newline-delimited-JSON-into-postgres&amp;quote=Using%20Shell%20Commands%20to%20Effortlessly%20Ingest%20Line-Delimited%20JSON%20into%20PostgreSQL" title="Share on Facebook" target="_blank" rel="noopener noreferrer"><img style="max-width:100%" alt="Share on Facebook" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGhlaWdodD0iNjdweCIgaWQ9IkxheWVyXzEiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDY3IDY3OyIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIwIDAgNjcgNjciIHdpZHRoPSI2N3B4IiB4bWw6c3BhY2U9InByZXNlcnZlIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48cGF0aCBkPSJNMjkuNzY1LDUwLjMyaDYuNzQ0VjMzLjk5OGg0LjQ5OWwwLjU5Ni01LjYyNGgtNS4wOTUgIGwwLjAwNy0yLjgxNmMwLTEuNDY2LDAuMTQtMi4yNTMsMi4yNDQtMi4yNTNoMi44MTJWMTcuNjhoLTQuNWMtNS40MDUsMC03LjMwNywyLjcyOS03LjMwNyw3LjMxN3YzLjM3N2gtMy4zNjl2NS42MjVoMy4zNjlWNTAuMzJ6ICAgTTM0LDY0QzE3LjQzMiw2NCw0LDUwLjU2OCw0LDM0QzQsMTcuNDMxLDE3LjQzMiw0LDM0LDRzMzAsMTMuNDMxLDMwLDMwQzY0LDUwLjU2OCw1MC41NjgsNjQsMzQsNjR6IiBzdHlsZT0iZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7ZmlsbDojM0E1ODlCOyIvPjwvc3ZnPg=="/></a></li><li><a style="display:block;width:39px" href="https://twitter.com/intent/tweet?url=https%3A%2F%2Fnickdrane.com%2Fusing-jq-to-effortlessly-ingest-newline-delimited-JSON-into-postgres&amp;text=Using%20Shell%20Commands%20to%20Effortlessly%20Ingest%20Line-Delimited%20JSON%20into%20PostgreSQL" target="_blank" title="Tweet" rel="noopener noreferrer"><img style="max-width:100%" alt="Tweet" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGhlaWdodD0iNjdweCIgaWQ9IkxheWVyXzEiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDY3IDY3OyIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIwIDAgNjcgNjciIHdpZHRoPSI2N3B4IiB4bWw6c3BhY2U9InByZXNlcnZlIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48cGF0aCBkPSJNMzguMTY3LDIyLjI4M2MtMi42MTksMC45NTMtNC4yNzQsMy40MTEtNC4wODYsNi4xMDEgIGwwLjA2MywxLjAzOGwtMS4wNDgtMC4xMjdjLTMuODEzLTAuNDg3LTcuMTQ1LTIuMTM5LTkuOTc0LTQuOTE1bC0xLjM4My0xLjM3N2wtMC4zNTYsMS4wMTdjLTAuNzU0LDIuMjY3LTAuMjcyLDQuNjYxLDEuMjk5LDYuMjcxICBjMC44MzgsMC44OSwwLjY0OSwxLjAxNy0wLjc5NiwwLjQ4N2MtMC41MDMtMC4xNjktMC45NDMtMC4yOTYtMC45ODUtMC4yMzNjLTAuMTQ2LDAuMTQ5LDAuMzU2LDIuMDc2LDAuNzU0LDIuODM5ICBjMC41NDUsMS4wNiwxLjY1NSwyLjA5NywyLjg3MSwyLjcxMmwxLjAyNywwLjQ4N2wtMS4yMTUsMC4wMjFjLTEuMTczLDAtMS4yMTUsMC4wMjEtMS4wODksMC40NjcgIGMwLjQxOSwxLjM3NywyLjA3NCwyLjgzOSwzLjkxOCwzLjQ3NWwxLjI5OSwwLjQ0NGwtMS4xMzEsMC42NzhjLTEuNjc2LDAuOTc2LTMuNjQ2LDEuNTI2LTUuNjE2LDEuNTY3ICBDMjAuNzc1LDQzLjI1NiwyMCw0My4zNDEsMjAsNDMuNDA1YzAsMC4yMTEsMi41NTcsMS4zOTcsNC4wNDQsMS44NjRjNC40NjMsMS4zNzcsOS43NjUsMC43ODMsMTMuNzQ2LTEuNTY4ICBjMi44MjktMS42NzQsNS42NTctNSw2Ljk3OC04LjIyMWMwLjcxMy0xLjcxNSwxLjQyNS00Ljg1MSwxLjQyNS02LjM1NGMwLTAuOTc1LDAuMDYzLTEuMTAyLDEuMjM2LTIuMjY3ICBjMC42OTItMC42NzgsMS4zNDEtMS40MTksMS40NjctMS42MzFjMC4yMS0wLjQwMywwLjE4OC0wLjQwMy0wLjg4LTAuMDQzYy0xLjc4MSwwLjYzNi0yLjAzMywwLjU1MS0xLjE1Mi0wLjQwMiAgYzAuNjQ5LTAuNjc4LDEuNDI1LTEuOTA3LDEuNDI1LTIuMjY3YzAtMC4wNjMtMC4zMTQsMC4wNDItMC42NzEsMC4yMzNjLTAuMzc3LDAuMjEyLTEuMjE1LDAuNTMtMS44NDQsMC43MmwtMS4xMzEsMC4zNjFsLTEuMDI3LTAuNyAgYy0wLjU2Ni0wLjM4MS0xLjM2MS0wLjgwNS0xLjc4MS0wLjkzMkM0MC43NjYsMjEuOTAyLDM5LjEzMSwyMS45NDQsMzguMTY3LDIyLjI4M3ogTTM0LDY0QzE3LjQzMiw2NCw0LDUwLjU2OCw0LDM0ICBDNCwxNy40MzEsMTcuNDMyLDQsMzQsNHMzMCwxMy40MzEsMzAsMzBDNjQsNTAuNTY4LDUwLjU2OCw2NCwzNCw2NHoiIHN0eWxlPSJmaWxsLXJ1bGU6ZXZlbm9kZDtjbGlwLXJ1bGU6ZXZlbm9kZDtmaWxsOiM1OThEQ0E7Ii8+PC9zdmc+"/></a></li><li><a style="display:block;width:39px" href="http://www.linkedin.com/shareArticle?mini=true&amp;url=mini=true&amp;url=https%3A%2F%2Fnickdrane.com%2Fusing-jq-to-effortlessly-ingest-newline-delimited-JSON-into-postgres&amp;title=Using%20Shell%20Commands%20to%20Effortlessly%20Ingest%20Line-Delimited%20JSON%20into%20PostgreSQL" target="_blank" title="Share on LinkedIn" rel="noopener noreferrer"><img style="max-width:100%" alt="Share on LinkedIn" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGhlaWdodD0iNjdweCIgaWQ9IkxheWVyXzEiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDY3IDY3OyIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIwIDAgNjcgNjciIHdpZHRoPSI2N3B4IiB4bWw6c3BhY2U9InByZXNlcnZlIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48cGF0aCBkPSJNNTAuODM3LDQ4LjEzN1YzNi40MjVjMC02LjI3NS0zLjM1LTkuMTk1LTcuODE2LTkuMTk1ICBjLTMuNjA0LDAtNS4yMTksMS45ODMtNi4xMTksMy4zNzRWMjcuNzFoLTYuNzljMC4wOSwxLjkxNywwLDIwLjQyNywwLDIwLjQyN2g2Ljc5VjM2LjcyOWMwLTAuNjA5LDAuMDQ0LTEuMjE5LDAuMjI0LTEuNjU1ICBjMC40OS0xLjIyLDEuNjA3LTIuNDgzLDMuNDgyLTIuNDgzYzIuNDU4LDAsMy40NCwxLjg3MywzLjQ0LDQuNjE4djEwLjkyOUg1MC44Mzd6IE0yMi45NTksMjQuOTIyYzIuMzY3LDAsMy44NDItMS41NywzLjg0Mi0zLjUzMSAgYy0wLjA0NC0yLjAwMy0xLjQ3NS0zLjUyOC0zLjc5Ny0zLjUyOHMtMy44NDEsMS41MjQtMy44NDEsMy41MjhjMCwxLjk2MSwxLjQ3NCwzLjUzMSwzLjc1MywzLjUzMUgyMi45NTl6IE0zNCw2NCAgQzE3LjQzMiw2NCw0LDUwLjU2OCw0LDM0QzQsMTcuNDMxLDE3LjQzMiw0LDM0LDRzMzAsMTMuNDMxLDMwLDMwQzY0LDUwLjU2OCw1MC41NjgsNjQsMzQsNjR6IE0yNi4zNTQsNDguMTM3VjI3LjcxaC02Ljc4OXYyMC40MjcgIEgyNi4zNTR6IiBzdHlsZT0iZmlsbC1ydWxlOmV2ZW5vZGQ7Y2xpcC1ydWxlOmV2ZW5vZGQ7ZmlsbDojMDA3QUI5OyIvPjwvc3ZnPg=="/></a></li><li><a style="display:flex;align-items:center;justify-content:center;width:37px;height:39px;margin-left:2px" href="mailto:?subject=Using Shell Commands to Effortlessly Ingest Line-Delimited JSON into PostgreSQL&amp;body=Check this out: https://nickdrane.com/using-jq-to-effortlessly-ingest-newline-delimited-JSON-into-postgres" target="_blank" title="Send email" rel="noopener noreferrer"><img style="max-width:36px" alt="Share via Email" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjxzdmcgaGVpZ2h0PSI2MHB4IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCA2MCA2MCIgd2lkdGg9IjYwcHgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6c2tldGNoPSJodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2gvbnMiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj48dGl0bGUvPjxkZWZzLz48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGlkPSJmbGF0IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSI+PGcgaWQ9Im1haWwiPjxwYXRoIGQ9Ik0zMCw2MCBDNDYuNTY4NTQzMyw2MCA2MCw0Ni41Njg1NDMzIDYwLDMwIEM2MCwxMy40MzE0NTY3IDQ2LjU2ODU0MzMsMCAzMCwwIEMxMy40MzE0NTY3LDAgMCwxMy40MzE0NTY3IDAsMzAgQzAsNDYuNTY4NTQzMyAxMy40MzE0NTY3LDYwIDMwLDYwIFoiIGZpbGw9IiMzNDk4REIiLz48cGF0aCBkPSJNMzAsMzMuNDYxNTM4NSBMNDcuMzA3NjkyMywxOC40NjE1Mzg1IEwxMi42OTIzMDc3LDE4LjQ2MTUzODUgTDMwLDMzLjQ2MTUzODUgWiBNMjUuMzI1MTc2NSwzMS44MDEwNTM2IEwzMCwzNS42MzgyMzk5IEwzNC42MDE1ODEzLDMxLjgwMTA1MzYgTDQ3LjMwNzY5MjMsNDIuNjkyMzA3NyBMMTIuNjkyMzA3Nyw0Mi42OTIzMDc3IEwyNS4zMjUxNzY1LDMxLjgwMTA1MzYgWiBNMTEuNTM4NDYxNSw0MS41Mzg0NjE1IEwxMS41Mzg0NjE1LDE5LjYxNTM4NDYgTDI0LjIzMDc2OTIsMzAuNTc2OTIzMSBMMTEuNTM4NDYxNSw0MS41Mzg0NjE1IFogTTQ4LjQ2MTUzODUsNDEuNTM4NDYxNSBMNDguNDYxNTM4NSwxOS42MTUzODQ2IEwzNS43NjkyMzA4LDMwLjU3NjkyMzEgTDQ4LjQ2MTUzODUsNDEuNTM4NDYxNSBaIiBmaWxsPSIjRkZGRkZGIi8+PC9nPjwvZz48L3N2Zz4="/></a></li></ul><div class="styles-module--border--O42kg"></div><div><span class="styles-module--mcHeader--OsuQO">Want to be notified when I release a new article? Subscirbe to my mailing list.</span><form><div class="styles-module--flexForm--4P7yQ"><label class="styles-module--emailLabel--xb2_N" for="mc-email">Your email address</label><input type="email" value="" name="email" id="mc-email" placeholder="Your email address"/><button type="submit">Subscribe</button></div></form></div></article></section><aside class="styles-module--sidebar--WpqGz"><div class="styles-module--sideBarSection--kbYhv"><h2 class="styles-module--sideBarLabel--1Yp9y">Most Popular Posts</h2><ul style="margin-left:0"><li class="styles-module--sideBarEntry--yZZc9"><a style="color:inherit" href="/scraping-the-web-with-puppeteer-lessons-learned">Scraping the Web with Puppeteer: Lessons Learned</a></li><li class="styles-module--sideBarEntry--yZZc9"><a style="color:inherit" href="/build-your-own-nested-query-string-encoder">Build Your Own Nested Query String Encoder/Decoder</a></li><li class="styles-module--sideBarEntry--yZZc9"><a style="color:inherit" href="/build-your-own-regex">Build Your Own Regex in Less Than 40 Lines of Code</a></li><li class="styles-module--sideBarEntry--yZZc9"><a style="color:inherit" href="/write-your-own-redux-connect">Write Your Own React-Redux Connect</a></li><li class="styles-module--sideBarEntry--yZZc9"><a style="color:inherit" href="/hidden-costs-of-postgresql-jsonb">The Hidden Costs of PostgreSQL&#x27;s JSONB Datatype</a></li></ul></div><div class="styles-module--sideBarSection--kbYhv"><h2 class="styles-module--sideBarLabel--1Yp9y">Most Recent Posts</h2><ul style="margin-left:0"><li class="styles-module--sideBarEntry--yZZc9"><a style="color:inherit" href="/optimizing-gatsby-build-times-for-large-websites-using-pagecontext">Optimizing Gatsby Build Times for Large Websites Using pageContext</a></li><li class="styles-module--sideBarEntry--yZZc9"><a style="color:inherit" href="/a-performance-guide-to-gatsbyjs">One Simple Performance Tip to Optimize GatsbyJS Static Sites</a></li><li class="styles-module--sideBarEntry--yZZc9"><a style="color:inherit" href="/hexo-vs-gatsbyjs-comparing-nodejs-static-site-generators">A Deep Dive into JavaScript Static Site Generators: Gatsby vs. Hexo</a></li><li class="styles-module--sideBarEntry--yZZc9"><a style="color:inherit" href="/using-jq-to-effortlessly-ingest-newline-delimited-JSON-into-postgres">Using Shell Commands to Effortlessly Ingest Line-Delimited JSON into PostgreSQL</a></li><li class="styles-module--sideBarEntry--yZZc9"><a style="color:inherit" href="/hidden-costs-of-postgresql-jsonb">The Hidden Costs of PostgreSQL&#x27;s JSONB Datatype</a></li></ul></div><div class="styles-module--sideBarSection--kbYhv"><h2 class="styles-module--sideBarLabel--1Yp9y">categories</h2><ul style="margin-left:0"><li class="styles-module--sideBarEntry--yZZc9"><a style="color:inherit" href="/categories/Architecture">Architecture (1)</a></li><li class="styles-module--sideBarEntry--yZZc9"><a style="color:inherit" href="/categories/Build-Your-Own">Build Your Own (3)</a></li><li class="styles-module--sideBarEntry--yZZc9"><a style="color:inherit" href="/categories/Functional-Programming">Functional Programming (1)</a></li><li class="styles-module--sideBarEntry--yZZc9"><a style="color:inherit" href="/categories/Gatsby">Gatsby (3)</a></li><li class="styles-module--sideBarEntry--yZZc9"><a style="color:inherit" href="/categories/Immutability">Immutability (1)</a></li><li class="styles-module--sideBarEntry--yZZc9"><a style="color:inherit" href="/categories/JavaScript">JavaScript (2)</a></li><li class="styles-module--sideBarEntry--yZZc9"><a style="color:inherit" href="/categories/Javascript">Javascript (2)</a></li><li class="styles-module--sideBarEntry--yZZc9"><a style="color:inherit" href="/categories/Postgres">Postgres (2)</a></li><li class="styles-module--sideBarEntry--yZZc9"><a style="color:inherit" href="/categories/React">React (2)</a></li><li class="styles-module--sideBarEntry--yZZc9"><a style="color:inherit" href="/categories/Redux">Redux (1)</a></li><li class="styles-module--sideBarEntry--yZZc9"><a style="color:inherit" href="/categories/Regular-Expressions">Regular Expressions (2)</a></li><li class="styles-module--sideBarEntry--yZZc9"><a style="color:inherit" href="/categories/Shell">Shell (1)</a></li><li class="styles-module--sideBarEntry--yZZc9"><a style="color:inherit" href="/categories/Software-Ethics">Software Ethics (1)</a></li><li class="styles-module--sideBarEntry--yZZc9"><a style="color:inherit" href="/categories/Technical-Hiring">Technical Hiring (1)</a></li><li class="styles-module--sideBarEntry--yZZc9"><a style="color:inherit" href="/categories/Testing">Testing (1)</a></li><li class="styles-module--sideBarEntry--yZZc9"><a style="color:inherit" href="/categories/Web-Scraping">Web Scraping (1)</a></li></ul></div></aside></div></div></div></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-107252357-1', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/using-jq-to-effortlessly-ingest-newline-delimited-JSON-into-postgres/";window.webpackCompilationHash="be161c4017b1db4ff602";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-d60063a2e95edf8a1525.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-0b90be8b85897bf78191.js"],"component---src-templates-article-js":["/component---src-templates-article-js-84b66870c9c53dcf996b.js"],"component---src-templates-category-js":["/component---src-templates-category-js-2ba81515f0899114edf3.js"],"component---src-templates-static-js":["/component---src-templates-static-js-d9ba822b9c395ecc62ca.js"],"component---src-pages-404-js":["/component---src-pages-404-js-9b9990edcd75217217b5.js"],"component---src-pages-index-js":["/component---src-pages-index-js-da270fe1a0bf28a2d2e9.js"]};/*]]>*/</script><script src="/component---src-templates-article-js-84b66870c9c53dcf996b.js" async=""></script><script src="/2-ee0ba89776f770af5f0b.js" async=""></script><script src="/1-5cd4bced7d1a4315449b.js" async=""></script><script src="/styles-931eac28e1f8d6822264.js" async=""></script><script src="/app-d60063a2e95edf8a1525.js" async=""></script><script src="/webpack-runtime-be38c574d6de23c49d2b.js" async=""></script></body></html>